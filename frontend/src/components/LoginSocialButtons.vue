<template>
    <div class="buttons">
        <a class="button button_google" @click="openPopup('google')">
            <svg
                    width="20"
                    height="20"
                    viewBox="0 0 20 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
            >
                <circle cx="10" cy="10" r="10" fill="white"/>
                <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M6.01712 10C6.01712 9.54538 6.09259 9.10941 6.22745 8.70056L3.86823 6.89905C3.40841 7.83256 3.14941 8.88453 3.14941 10C3.14941 11.1147 3.4082 12.1659 3.86724 13.0989L6.22515 11.2938C6.0916 10.8869 6.01712 10.4525 6.01712 10Z"
                        fill="#FBBC05"
                />
                <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M10.1594 5.86366C11.1471 5.86366 12.0393 6.21366 12.7403 6.78634L14.7795 4.75C13.5369 3.66817 11.9437 3 10.1594 3C7.38912 3 5.00824 4.58419 3.86823 6.899L6.22733 8.70052C6.77093 7.05048 8.32044 5.86366 10.1594 5.86366Z"
                        fill="#EA4335"
                />
                <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M10.1594 14.1364C8.32055 14.1364 6.77104 12.9496 6.22744 11.2996L3.86823 13.1007C5.00824 15.4159 7.38912 17.0001 10.1594 17.0001C11.8691 17.0001 13.5015 16.3929 14.7266 15.2554L12.4873 13.5242C11.8554 13.9223 11.0597 14.1364 10.1594 14.1364Z"
                        fill="#34A853"
                />
                <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M16.8506 9.99998C16.8506 9.58633 16.7868 9.14084 16.6912 8.72729H10.1594V11.4318H13.9192C13.7312 12.354 13.2196 13.0628 12.4873 13.5242L14.7266 15.2553C16.0136 14.061 16.8506 12.2817 16.8506 9.99998Z"
                        fill="#4285F4"
                />
            </svg>
            <span>Войти через Google</span>
        </a>
        <button class="button" @click="openPopup('facebook')">
            <svg
                    width="10"
                    height="20"
                    viewBox="0 0 10 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
            >
                <path
                        d="M6.6 6.6V4.9C6.6 4 6.7 3.5 8.1 3.5H9.9V0H7C3.5 0 2.2 1.7 2.2 4.5V6.6H0V10H2.2V20H6.6V10H9.5L10 6.6H6.6Z"
                        fill="#4267B2"
                />
            </svg>
        </button>
        <button class="button" @click="openPopup('vkontakte')">
            <svg
                    width="20"
                    height="20"
                    viewBox="0 0 20 20"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
            >
                <path
                        d="M19.2152 4.49854H15.9697C15.8373 4.49854 15.7073 4.53446 15.5936 4.60246C15.4799 4.67047 15.3868 4.76803 15.3242 4.88475C15.3242 4.88475 14.0297 7.26863 13.614 8.07157C12.4954 10.2316 11.7711 9.55346 11.7711 8.55099V5.09445C11.7711 4.80561 11.6563 4.5286 11.4521 4.32436C11.2478 4.12012 10.9708 4.00538 10.682 4.00538H8.24183C7.90952 3.98067 7.57641 4.04133 7.27414 4.18159C6.97186 4.32185 6.71047 4.53706 6.51477 4.80677C6.51477 4.80677 7.75385 4.60643 7.75385 6.27598C7.75385 6.68998 7.77518 7.88096 7.79461 8.87988C7.79827 9.02708 7.75668 9.17186 7.67545 9.29468C7.59422 9.41749 7.47726 9.51243 7.34036 9.56666C7.20346 9.62089 7.05322 9.63181 6.90992 9.59795C6.76662 9.56409 6.63716 9.48707 6.53902 9.37729C5.54022 7.98814 4.71288 6.48342 4.07498 4.89584C4.0202 4.77708 3.9325 4.67652 3.82229 4.6061C3.71208 4.53568 3.58398 4.49835 3.45319 4.49854C2.74935 4.49854 1.3409 4.49854 0.504463 4.49854C0.423353 4.49799 0.343323 4.51714 0.271246 4.55434C0.199169 4.59154 0.137201 4.64569 0.0906655 4.71212C0.0441302 4.77855 0.0144189 4.85529 0.004084 4.93574C-0.00625086 5.01619 0.00309974 5.09795 0.0313325 5.17399C0.926709 7.63 4.7837 15.3481 9.18608 15.3481H11.039C11.2332 15.3481 11.4194 15.271 11.5567 15.1337C11.6939 14.9964 11.7711 14.8102 11.7711 14.6161V13.4972C11.7711 13.3568 11.8121 13.2196 11.8892 13.1022C11.9663 12.9849 12.076 12.8927 12.2048 12.837C12.3336 12.7813 12.4759 12.7645 12.6142 12.7886C12.7525 12.8128 12.8807 12.8769 12.9829 12.973L15.2008 15.0568C15.4 15.2439 15.663 15.3481 15.9363 15.3481H18.8488C20.2534 15.3481 20.2534 14.3734 19.4876 13.6192C18.9486 13.0883 17.0037 11.0383 17.0037 11.0383C16.8371 10.8658 16.7378 10.6393 16.7236 10.3999C16.7094 10.1605 16.7814 9.92397 16.9264 9.73297C17.555 8.90568 18.5833 7.55147 19.0194 6.97133C19.6154 6.17838 20.6942 4.49854 19.2152 4.49854Z"
                        fill="#4A76A8"
                />
            </svg>
        </button>
        <button class="button" @click="openPopup('mailru')">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path fill-rule="evenodd" clip-rule="evenodd" d="M9.64553 3.94637C11.1701 3.94637 12.6013 4.62384 13.6592 5.67085C13.6592 5.17814 14.0015 4.77781 14.4682 4.77781H14.6237C15.3705 4.77781 15.526 5.48608 15.526 5.70164V13.5234C15.4638 14.0469 16.055 14.2932 16.3972 13.9545C17.6729 12.6612 19.1664 7.33374 15.6194 4.22352C12.2591 1.35965 7.7787 1.82156 5.41404 3.45366C2.89382 5.17814 1.24479 8.99663 2.83159 12.5688C4.54286 16.4796 9.42773 17.6498 12.3524 16.4796C13.8148 15.8946 14.4993 17.8654 12.9747 18.5121C10.6723 19.4975 4.23172 19.4051 1.21367 14.2317C-0.808726 10.7519 -0.715385 4.62384 4.69843 1.45203C8.80545 -0.980718 14.2504 -0.303243 17.5173 3.08413C20.9399 6.62547 20.7532 13.2462 17.3929 15.833C15.8683 17.0031 13.6281 15.8638 13.6592 14.1701L13.6281 13.6158C12.5702 14.6628 11.1701 15.2479 9.64553 15.2479C6.62748 15.2479 3.95169 12.5996 3.95169 9.64331C3.98281 6.62547 6.62748 3.94637 9.64553 3.94637ZM13.4725 9.42775C13.3481 7.24136 11.699 5.9172 9.73887 5.9172H9.64553C7.3431 5.9172 6.09855 7.70327 6.09855 9.73569C6.09855 12.0145 7.62313 13.431 9.64553 13.431C11.8857 13.431 13.3792 11.7989 13.4725 9.88967V9.42775Z" fill="#FAA61A"/>
            </svg>
        </button>
    </div>
</template>

<script>
    import {call} from "vuex-pathify"
    import open from 'oauth-open'

    export default {
        name: "LoginSocialButtons",
        computed: {
            providers() {
                return {
                    facebook: {
                        width: 580,
                        height: 400
                    },
                    google: {
                        width: 452,
                        height: 633
                    },
                    vkontakte: {
                        width: 668,
                        height: 380
                    },
                    mailru: {
                        width: 446,
                        height: 295
                    }
                }
            }
        },
        methods: {
            openPopup(provider) {
                open(`/api/oauth/${provider}/redirect`, this.providers[provider], (err, code) => {
                    if (err) {
                        return;
                    }
                    this.oauthAuthenticate({code: code.code, provider})
                })
            },
            oauthAuthenticate: call('authentication/oauthAuthenticate'),
        }
    }
</script>